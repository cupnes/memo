* やりたいことリスト
** Linuxカーネルデバッグ環境構築
*** 目的
- 小崎(ガチャピン)さんがインタビューで答えていた
   「動的デバッグ」の環境を作る

**** 参考
-- カーネルハッカー・小崎資広の「コードを読む技術」 | サイボウズ式
--- http://cybozushiki.cybozu.co.jp/articles/m000316.html
#+BEGIN_EXAMPLE
小崎: ソースコードは頭から読むようにできていないんです。
      頭から読むのは、学生の頃にやって失敗しまくった。要するに心が乱れるんですよ。
      本は前から読むように最適化されるんだけど、それは著者がそうなるように頑張ってるからなんです。
      生の情報は最適化されていないんです。だから、ソースコードを本のように読むのは、かなり非効率な読み方なんです。

西尾: なるほど、本と違って前から読むように整理されてないから、違う読み方が必要だ、と。

小崎: なので、タグジャンプを使ってトップダウンやボトムアップで読むか、
      デバッガーで実行順序で読むか、Gitとかを使って時系列で見るか、が三大流派です。
#+END_EXAMPLE

*** やること(デバッガーで実行順序で読む)
- QEMU+GDBでデバッグできるようにする
-- 1. デバッグできるようにLinuxカーネルをコンパイル
-- 2. QEMU側の設定
--- カーネル起動オプション(パラメータ)にルートファイルシステムを指定する必要がある
---- ルートファイルシステムが見つからない旨のカーネルパニックが発生する
---- デバッグ用の仮のルートファイルシステムはどう用意すれば良いか？
-- 3. GDBの設定

**** 参考
- QEMU上のLinuxカーネルをGDBでデバッグする - Narrow Escape
-- http://hiroom2.jimdo.com/2014/01/15/qemu%E4%B8%8A%E3%81%AElinux%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%82%92gdb%E3%81%A7%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%81%99%E3%82%8B/

*** その他に
**** Gitとかを使って時系列で見る
- コミットログを追えるように
-- LinusのTreeをcloneしておく

**** タグジャンプを使ってトップダウンやボトムアップで読む
- 静的デバッグがすぐ行えるように
-- カーネルソースが入っているディレクトリのgtagsコマンドはcronで自動的に走らせる
-- emacs上でgtagsの更新ができるように

***** 参考
- Emacs - GNU Global のタグファイル自動更新 - Qiita
-- http://qiita.com/hayamiz/items/8e8c7fca64b4810d8e78
